apiVersion: v1
kind: ConfigMap
metadata:
  name: oci-csi-iscsiadm
  namespace: kube-system
data:
  iscsiadm: |
    #!/bin/bash
    # Wrapper for iscsiadm to handle OCI-specific quirks
    /sbin/iscsiadm "$@"
---
# OCI Volume Provisioner config using Instance Principals
# No API keys needed - the CSI driver uses the instance metadata service
apiVersion: v1
kind: Secret
metadata:
  name: oci-volume-provisioner
  namespace: kube-system
type: Opaque
stringData:
  config.yaml: |
    auth:
      useInstancePrincipals: true
    compartment: ocid1.compartment.oc1..aaaaaaaa5ehb7r5dse3sv7gbmturwzqiuukm2u5d5uaav7lo2aqqlcxa7l2a
